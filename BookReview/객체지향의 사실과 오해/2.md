2장 이상한 나라의 객체
=

이번 장은 객체의 특성을 설명하고자한다.

현실세계의 모방이라는 객체지향의 근본적인 개념을 넘어서 실제 객체지향의 객체가 갖는 의미에대해 알아보자.

> 객체는 **상태, 행동, 식별자** 를 지니는 실체로 보는 것이 가장 효과적이다. p.47

상태와 행동, 식별자를 떠올리기 쉽게 설명하자면 상태는 클래스가 갖는 필드이며 클래스가 가지는 api(메서드)는 행동 식별자는 객체의 해쉬값(주소)를 의미한다.

책에 나온 이상한 나라의 앨리스를 예시로 들며 상태 행동 식별자를 정리해보자.

- 상태
    
    객체는 주변과 끊임없이 상호작용한다. 서로 메세지를 주고받으며 요청과 응답이 오고간다. 이 과정 속에서 객체의 상태는 바뀔 수도 바뀌지 않을 수도 있다.

    앨리스가 작은 문을 통과하기위해 자신의 키를 반복적으로 줄이고 키우는 것은 객체가 상태를 변화하는 것으로 설명된다.

    **즉 앨리스(객체)의 상태는 과거 행동들(키를 줄이고 키우는)에 의존한다**

    상태가 필요한 이유는 뭘까?

    과거 행동들의 단순한 나열로는 객체의 상태를 파악하기 쉽지않다. 매우 복잡하기때문이다.

    하지만 과거 행동들의 결과는 현재 객체의 상태를 의미한다.

    **과거 행동들의 집약체가 상태인 셈이다.**

앨리스가 자신의 키를 줄이기위해 먹는 케이크, 부채, 버섯, 음료 모두 객체이고 귀여운 토끼도 객체이며 문 역시 객체이다.

모두 식별이 가능하며 행동, 상태를 갖는다.

하지만 토끼가 뛰어가는 속도, 앨리스의 키, 문이 열렸는지의 여부는 객체가 아니다.

즉 단순한 값들은 객체가 될 수 없다.

앨리스가 음료를 마신다는 것은 객체와 객체가 서로 연결되어있어야한다. 이것을 **링크**라 부른다.

## 즉 하나의 객체는 단순한 값과 다른 객체간의 조합을 의미하고 이것을 프로퍼티라고 한다. (링크와 속성(단순한 값)으로 구분)

- 행동

    객체는 상태를 가지며 이 상태는 변화할 수 있다. 바로 행동으로 상태는 변화한다.

    하지만 행동은 과거 상태에 의존적이다.

    키가 160이던 앨리스가 120이 되었다면 앨리스의 행동이 과거 160이던 상태에 의존적이기에 120이라는 키가 될 수 있는 것이다.

    상태와 행동은 서로 영향을 미치는 상호작용이라 할 수 있다.

    앨리스가 음료를 마시고 키를 줄이는 부분을 상상해보자.

    객체의 행동은 자신의 상태를 변화시키고 동시에 다른 객체(음료)의 상태를 변화시킨다.

    즉 협력하는 객체에게 메세지를 보내는 것이다.

    음료를 마셨다면 음료의 양이 변화해야하기때문이다.

    **하지만 객체가 독립적이고 자율적이기위해선 객체가 다른 객체에게 요청을 보낼 뿐 절대 직접 변화시키지 않아야한다.**

    이게 현실세계와 객체지향의 세계에 명확한 차이점이다.

    어떤 음료수도 스스로 자신의 양을 줄일 수 없다. 어떤 케이크도 능동적인 객체가 될 수 없다.

    하지만 소프트웨어의 세계는 음료가 스스로 자신의 상태를 결정하고 행동할 수 있다.

    객체들은 서로 메세지를 보내고 상태의 변화를 기대할 뿐 절대 강제적일 수 없다.

- 식별자

    위에서 단순한 값(음료의 양, 케익의 크기, 앨리스의 키)는 객체가 될 수 없다고 했다.

    유일하게 식별될 수가 없기때문이다.

    하지만 객체는 유일하게 식별될 수 있고, 그래야만한다.

    즉 단순한 값(value)는 상태가 같다면 같은 것으로 판단한다.(동등성 : equality)

    하지만 객체는 상황이 다른데, 키와 이름이 같다고 같은 사람이 아니듯 서로는 유일하게 식별돼야한다.(동일성 : identical)

---

## 객체의 특성 정리

- 객체는 상태를 가지며 상태는 변경가능하다.

- 객체의 상태를 변경시키는 것은 객체의 행동이다.

    - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술할 수 있다.

    - 행동의 순서가 실행 결과에 영향을 미친다.

- 객체는 어떤 상태에 있더라도 유일하게 식별 가능하다.

---

## 행동이 상태를 결정한다.

객체지향을 설계할 때 행동을 먼저 결정하고 나중에 상태를 결정해야한다.

사실 이 말의 의미가 데이터 중심적인 사고를 하지 말라는 것이다.

상태에 초점을 두면 객체지향을 설계할 때 절차지향적인 사고가 들어올 가능성이 매우높다.

객체지향은 절차지향과는 달리 각 객체간의 상호작용(협력)의 결과물이다.

서로의 협력은 충분히 자율적이여야하기때문에 상태에 의존적인 설계는 데이터중심적인 프로그래밍으로 변질되기 쉽다.

---

## 은유와 객체

현실세계와 소프트웨어의 세계는 정확히 일치할 수가 없다.

현실세계의 객체를 추상화해서 소프트웨어의 세계로 옮긴다는 점은 비슷하지만 결정적인 차이가 존재한다.

현실세계에선 생물들은 능동적 존재이지만 그밖의 객체들은 수동적인 존재이다.

하지만 이상한 나라 소프트웨어의 세계에선 수동적인 존재조차 능동적인 행동을 취할 수 있다.

위에서 음료수가 스스로의 양을 줄이듯이...

그래서 소프트웨어의 객체는 하나의 생물로 규정해야한다.

이것을 의인화라 부른다.

