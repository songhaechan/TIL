객체지도
=

사용자는 소프트웨어의 기능을 사용하며 이 기능에대한 요구사항은 끊임없이 증가한다.

이런 관점으로 봤을 때 소프트웨어의 기능은 설계시에 핵심적인 요소임은 분명하다.

하지만 기능의 변화에 대응하기위해선 개발자는 변화를 수용할 수 있을 만한 구조를 생각하고 설계해야한다.

이것이 기능과 구조에대한 관점이다.

## 기능

전통적인 소프트웨어(객체지향적 설계가아닌)는 구조가 기능에 종속적이게끔 설계해왔다.

기능이 중심이 되는 소프트웨어는 기능을 먼저 생각하고 구조를 생각한다.

이런 설계는 기능중심주의로 구조적으로 빈약하며 변경에 취약하다.

기능이 중요하지않다는 것은 아니지만 객체지향의 세계에서는 기능을 우선시하기보단 객체들의 책임,역할 그리고 협력을 중심으로 구조를 설계하는 것이 옳다.

## 구조

앞서 말했지만 구조는 기능에 종속적이기보다 기능이 구조에 종속적이여야한다.

개발자가 변화하는 미래를 예측하는 것은 불가능하지만 객체지향적인 설계로 **대비**하는 것은 가능하다.

지금껏 알아본 확장에 열려있고 수정에 닫힌 설계를 함으로써 기능은 구조에 종속적인 설계를 할 수 있다.

## 안정적인 재료 : 구조 (도메인 모델)

도메인은 사용자가 프로그램을 사용하는 대상 분야를 말한다.

모델은 지식을 단순화하고 의식적으로 구조화한 형태이다.

은행 업무를 예시로들어보자.

정기예금 시스템에서 도메인 모델을 설계한다면 정기예금, 계좌, 이자, 이자율은 도메인 모델이 될 수 있다.

## 사용자가 바라보는 도메인과 개발자가 바라보는 도메인

소프트웨어는 궁극적으로 사용자가 기능을 사용하고 비용을 지불해서라도 사용할만한 매력을 가져야한다.

즉 도메인 모델 또한 사용자가 바라보는 시선에 맞춰져야하며 개발자는 그러한 도메인을 설계해야한다.

사용자와 개발자가 생각하는 도메인의 표현적 차이가 좁아지면 좁아질 수록 소프트웨어는 사용자에 친화적이게된다.

이런 도메인을 시스템 도메인이라한다.(최종 도메인)

**이런 관점에서 객체지향은 도메인 모델을 설계할 최고의 패러다임이다**

현실세계의 객체와는 사뭇다르지만 은유를 통해 최대한 가깝게 설계함으로써 사용자가 생각하는 도메인과 최대한 차이를 줄일 수 있다.

## 불안정한 재료 : 기능

기능이 불안정한 이유는 변화의 가능성때문이다.

하지만 역설적으로 기능은 소프트웨어에서 가장 필수적인 요소라볼 수 있는다.

이 기능을 사용자관점에서 바라보는 것을 유스케이스라고한다.

사용자가 시스템에 요청을 보내고 응답을 받는 하나의 과정을 통합된 시나리오로 표현하는 것을 말한다.

유스케이스는 그 속에 담긴 이야기에 초점을 맞춰야한다. 다이어그램이나 내부 설계, 인터페이스를 노출하지않는다.

즉 기능적 요구사항을 사용자의 목표라는 문맥으로 엮는 것이다.

## 재료합치기 : 기능과 구조의 통합

도메인 모델과 유스케이스를 함께 사용하며 책임-주도 설계를 해야한다.

사용자가 원하는 이야기는 유스케이스에 담겨있다.

이 이야기는 객체세상과는 사뭇다르고 구체적이지않다.

이제 이 이야기의 기능을 시스템이라는 하나의 거대한 객체가 처리한다고 생각해보자.

이 기능이 시스템을 만나면서 하나의 거대한 책임으로 변화한다.

이제 시스템은 큰 책임을 작게 나눠 객체에게 책임을 분배해야한다.

**어떻게 책임을 분배할 것인가?**

**이때 사용할 것이 구조적인 도메인 모델이다**

도메인 모델에 책임을 분배하자.

책임을 받은 객체들은 충분히 **자율적으로** 행동해야한다.

도메인 모델은 협력관계를 전제로 했기때문에 그다음 생각할 것은 어떤 메세지를 보낼 것인지를 결정해야한다.

메세지를 기반으로 형성된 협력관계에서 자연스럽게 각자가 가져야할 상태가 도출된다.

이런 상태는 객체 스스로가 변경해야한다.(자율적이기 위해)

이렇게 거대한 기능은 시스템을 만나 잘게 부숴지며 객체들은 하나의 목표를 향해 협력하게된다.

## 기능의 변화를 흡수

기능의 변화는 구조적인 도메인 모델이 흡수한다.

은행 정기예금 시스템 도메인 모델에서 정기예금이라는 시스템 자체가 폐지되지않는 이상 이 모델들은 견고하게 자리를 지킨다.

즉 변화의 가능성이 가장 작은 것들이다.

객체지향은 이렇게 견고한 모델뒤에 무한히 변화하는 기능을 추가하게끔 다양한 기법들을 제공한다.(지금까지 알아보았다.)

기법들중 다형성은 유연한 설계를 위해 필수적으로 사용된다.

그래서 도메인 모델을 견고하게 설계하고 사용자가 바라보는 모델에 가깝게 설계하는 것이 중요한 이유다.

도메인이 견고하지못하다면 그 도메인에 기대고있던 코드들도 불안정하게된다.



