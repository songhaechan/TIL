IP
=

IP는 컴퓨터 통신에 있어 매우 중요한 통신규약이다.

**IP**는 '패킷'을 정해진 목적지에 보내기위해 사용된다.

**패킷**은 전송할 데이터를 잘게 쪼게놓은 단위에 해당하는데 최대 단위는 65KB이다.

데이터를 자르는 이유는 한 번에 큰 데이터를 전송하다 실패하면 전체 데이터를 다시 전송해야하는 부담때문인다.

## IP 주소의 구성

IPv4 주소

    192.168.0.1

IP는 4개의 필드로 구성되며 각 필드는 10진수로 표기된다.

편의상 10진수이지 사실은 **8개의 비트(옥텟)**가 한 필드를 구성하므로 각 필드는 10진수로 **0~255**까지 할당이 가능하다.

결과적으로 총 8x4 32비트를 가질 수 있고 총 43억개의 IP를 구분할 수 있다.

## 네트워크 주소와 호스트 주소

IP는 네트워크 주소와 호스트 주소로 나누어지게 설계되었다.

각 개인을 구분하는 부분과 각 개인을 묶은 집단(네트워크)을 구분한다.

192.168.0.1 에서 앞 3개 필드는 네트워크 부분 나머지 한 개의 필드가 호스트 부분으로 나눌 수 있다.

**이때 호스트부분에서 192.168.0.0 은 네트워크 자체 주소로 호스트가 사용불가능하다.**

**또한 호스트부분에서 192.168.0.255는 브로드케스트 주소로 호스트가 사용불가능하다.**

브로드케스트는 해당 네트워크 구성원 전체에게 데이터를 전송하는 목적이다.

## 네트워크 주소와 호스트 주소를 구분하는 클래스

위에선 앞 세개의 옥텟을 네트워크 부분 나머지를 호스트부분으로 나누었지만 더 많은 구분이 가능하다.

A B C D E 클래스가 있지만 ABC만 알아보자.

A : 첫 옥텟이 네트워크 주소

B : 두 옥텟이 네트워크 주소

C : 세 옥텟이 네트워크 주소

이렇게 구분하게되면 A B C 각각이 가질 수 있는 호스트 주소의 개수는 다음과 같다.

A : 1600만개

B : 6만 5천개

C : 250개

숫자만 봐도 클래스간의 호스트주소 개수차이가 너무 극심하다.

일반적으로 세계에 존재하는 평범한 네트워크는 C는 너무 작고 B는 너무 크다.

**작은 것을 쓸 순 없으니 주로 B를 할당받는다**

즉 낭비가 심해지고 세계적으로 주소가 고갈되는 현상이 나타났다.

## CIDR 과 서브넷 마스크

클래스 기반으로 주소를 나누는것은 너무 비효율적이다.

그래서 등장한 것이 CIDR이다.

**클래스는 8비트를 나누어 주소를 구분했다.**

**CIDR은 1비트로 나누어 더 세세히 구분한다.**

즉, 1024개 2048개 등등 조금 더 세세하게 구분이 가능해져서 낭비가 조금은 해결된다.

### 네트워크 주소는 어떻게 해결할까?

클래스는 네트워크 부분을 식별하기 매우 쉬웠다. 하지만 비트를 1로 나누면 네트워크 주소는 어떻게 식별할까?

### 서브넷 마스크

서브넷 마스크는 11111111.11111111.11100000.00000000

처럼 호스트 주소의 시작 직전까지 1로 채워 네트워크 부분을 식별한다.

이 때 표기를 쉽게하기위해 1의 갯수를 IP옆에 적어준다.

## 주소 낭비의 해결책 DHCP

**DHCP**는 그때그때 IP를 동적으로 할당하는 기술이다.

**유동 IP**라고도 불리는데 책을 빌려서 읽듯이 IP를 빌려서 사용하는 기술이다.

고정 IP는 서비스를 제공하는 기업(기업이 아니더라도 일정한 위치에서 서비스를 제공하는 사업자)이 사용한다.

공유기에 DHCP기술이 적용되어 사용하지않으면 반납하고 사용할땐 제공하는 방식으로 작동된다.

## 주소 낭비의 해결책 NAT

사실 가정이나 밖에서 스마트폰,노트북을 이용해 **공유기로부터 할당받는 IP는 사설 IP**이고 **ISP기업이 공유기에 할당한 IP가 공인 IP이다.**

사설 IP는 서로 다른 공인 IP속에선 중복을 허용하기때문에 IP의 개수가 증대되는 효과가있다.

사설 IP를 이용해 외부와 통신하기위해 공인 IP를 거치는 과정을 네트워크 주소 변환 NAT라고 한다.

## 주소 낭비의 해결책 IPv6

이 방법은 단순하게 IP의 갯수를 늘려버린 방법이다.

단순하지만 확실한 해결책이기도하다.

기존 32비트에서 128비트로 늘려 2에 128승 만큼의 주소를 할당할 수 있다.

