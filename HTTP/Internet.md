인터넷 네트워크
==
내가 친구와 컴퓨터를 이용한 통신은 거대한 인터넷 네트워크 아래에서 이루어진다.

> 나의 컴퓨터 - 네트워크(인터넷) - 친구

내가 안녕이라는 데이터를 친구에게 보낸다고 가정하면, 데이터는 매우 복잡한 인터넷에 던져지고 수많은 **노드서버**를 거쳐서 친구에게 도달한다.

실생활에서 집주소없이는 택배를 보낼 수 없는것처럼 컴퓨터도 고유주소를 갖지않고서는 통신이 불가능하다. 그래서 등장한것이 IP(Internet Protocal)이다.

IP
==
> IP : 네트워크상에서 통신을 위한 각 노드의 위치주소  
    4개의 필드로 구성된 숫자로 표현된다. ex)100.100.100.1
    


이제 우리는 주소를 부여받았으니 데이터를 포장해서 주소를 적고 보내기만하면 된다. 하지만 아무 문제없이 데이터가 잘 전송될것만 같지만 실상 그렇지 못하다.

다음은 IP의 한계점들이다.

1. 비연결성

내가 친구에게 데이터를 전송할 때 친구 컴퓨터의 상태에 무관하게 IP프로토콜은 패킷(데이터)를 전송하게된다.
    
    IP패킷이란 도착지 IP와 출발지IP를 적어놓은 부가정보를 뜻하고 이 패킷을 데이터 위에 감싸게된다.

2. 비신뢰성

데이터를 전송하면 중간에 수많은 노드서버를 거친다고 했다. 이때 중간서버들의 상태가 고르지못하여 패킷이 유실되거나, 도착지까지 안전하게 갔다고 하더라도 패킷을 여러개 보냈을 경우 패킷의 순서가 꼬일 가능성이있다.

3. 프로그램의 구분

우리는 하나의 컴퓨터로 여러가지 작업을한다. 음악도 듣고 게임도 하고 웹서핑도하는데, 나의 IP는 하나인데 통신을 주고받는 상대 서버는 여러가지이다. 이 때 각각의 서버들을 구분할 방법이 없다.

위와 같은 **문제점**으로 **TCP프로토콜**이 탄생하였다.


TCP/UDP
==
**TCP**는 IP가 갖는 문제점들을 확실하게 해결해낸다.

IP는 패킷에 도착지와 출발지의 주소를 적어보내지만 TCP는 추가적으로 **도착지와 출발지 PORT, 전송제어, 순서제어** 등 추가적인 정보와 함께 패킷을 보낸다.

위 추가정보로 어떻게 IP패킷이 갖는 문제점을 해결하는지 알아보자.

1. 3 way handshake

3 way handshake란 나와 친구사이에 3번의 요청과 확인이 오고간다.

1.SYN(나:우리 연결할까?) 2.SYN+ACK(친구:OK,우리연결하자) 3.ACK(나:그래 연결하자) 

SYN는 Syncronize(동기화)의 약자이고 ACK는 Acknowloge(승인)의 약자이다.

중요한 점은 **가상연결**이란 점이다. 서로 논리적 연결만 한 상태이지 실제 연결을 한 상태는 아니다. 이렇게 나와 친구가 통신이 가능하다는 것을 서로 확인한 셈이다.

2. 데이터 전달 보증

데이터가 중간서버에의해 유실되더라도 TCP는 서로 데이터를 잘 받았는지 확인이 가능해진다.

3. 순서 보장

IP패킷을 이용하면 중간에 거치는 노드서버들의 경로가 제각각이기때문에 패킷의 순서를 보장할 수 없었지만 TCP패킷은 순서가 틀어졌을 경우에 틀어진 패킷부터 다시보내라는 요청을 보내게되므로 순서가 보장된다.

4. PORT

포트는 하나의 IP에 여러 PORT를 가지고 있다. 아파트를 예시로하면 하나의 동은 IP가 되고 하나의 호가 PORT가 된다고 볼 수 있다.

이렇게 포트를 갖게되면 하나의 IP에서 여러 작업이 가능해진다. 지정된 포트로 패킷이 오고가기때문에 다른 패킷과 충돌할 일이 없어진다.

TCP패킷은 IP패킷과함께 사용되고 **프로토콜 4계층**에의해서 전송된다. 프로토콜 4계층은 차후에 알아보도록하고 UDP에대해 먼저 알아보자.

---
TCP/IP 패킷은 현재 가장 많이 사용되는 프로토콜이지만, 요즘 UDP가 점점 각광을 받고있다.

TCP는 여러가지 정보를 담고있기때문에 용량도 크고 속도도 느리다는 단점이있지만, UDP는 IP프로토콜과 거의 같지만 PORT가 추가된 프로토콜이다.

그렇기때문에 UDP는 TCP보다 속도가 빠르기때문에 점점 사용되는 추세이다.

---

프로토콜 4계층이란 OSI7계층을 TCP/IP에 맞춰 단순화시킨 간단한 구조다.

    어플리케이션 계층 - 전송 계층 - 인터넷 계층 - 네트워크 액세스 계층

좌에서 우방향으로 깊어지는 방식이다.

1. 어플리케이션 계층

크롬브라우저를 예시로든다면 가장 표면에서 사용자와 소통을 담당하는 구간이다. 우리가 브라우저에게 요청을 보내면 브라우저는 사용자의 요청을 HTTP헤더로 감싸서 전송계층으로 넘긴다.

어플리케이션의 프로토콜 : HTTP, HTTPS(보안강화), SSH, DNS 등

2. 전송 계층

통신간에 데이터전송을 보장하는 계층으로 이 곳에서 데이터를 TCP패킷으로 감싼다.

포트번호를 패킷에 추가하게되므로 하나의 IP에 여러 서버와 동시에 충돌없이 통신이 가능해진다.

이후에 인터넷계층으로 패킷을 내려보낸다.

3. 인터넷 계층

이 계층이 TCP패킷을 IP패킷으로 감싸주는 계층이다. 이렇게 TCP/IP패킷이 생성되고 
마지막에 네트워크 액세스 계층으로 내려가 데이터를 전송한다.

DNS
==
Google.com Naver.com 등 모든 도메인은 IP주소를 가지고있고 이 IP주소를 체계적으로 관리할 필요성이 생겼다.

중간에 도메인의 IP가 바뀌더라도 DNS에 내 IP주소는 바뀌었어라고 알려주기만하면 사용자는 IP의 변경에 유연하게 접근이 가능하다.

간단히 말해서 IP주소들을 한 곳에 모아 서버를 만들어놓고 요청이 들어올때마다 서버에서 해당 도메인에대한 IP를 응답해준다.




